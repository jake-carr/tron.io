<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tron.io</title>
    <style>
      /* Styling here */
    </style>
</head>
<body>
  <h2 class="title">Rooms</h2>
  <div id="list">
  </div>
  <script src="/socket.io/socket.io.js"></script>
  <script>
      const socket = io();
      function listRooms() {
        function callback(rooms) {
          const roomList = document.getElementById('list');

          // Make a button for each available room
          for (let room of rooms) {
            const option = document.createElement('button');
            option.innerText = room.name;
            // Function to join room
            option.addEventListener('click', () => {
              function success() {
                console.log(`Joined room ${room.name}`);
              }
              socket.emit('joinRoom', room.id, success);
            });
            roomList.appendChild(option);
          }
        // If roomList is empty, display a message
        if (!roomList.children.length) {
          const noRooms = document.createElement('p');
          noRooms.innerText = 'No rooms found!';
          roomList.appendChild(noRooms)
        }

        // if logic is needed to clear list later
        // while (roomList.firstChild) {
        //     roomList.firstChild.remove()
        //   }

        // Append list to page
        document.body.append(roomList);
      }
      socket.emit('getRoomNames', null, callback);
    }
    listRooms()
  </script>
</html>